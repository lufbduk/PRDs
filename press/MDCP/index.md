# MDCP（Markdown代码块插件）

> **注意：此文件由AI（GitHub Copilot）生成**

MDCP (Markdown Code-block Plugin) 是一种在 Markdown 中以代码插件形式实现的插件系统，如果没有安装相应插件，则渲染成代码块，因此可以在任何 Markdown 渲染器中使用。该方案是 MDX 的替代方案，参考了 Mermaid 的实现原理。

## 项目概述

MDCP 旨在解决在 Markdown 文档中嵌入动态、交互式内容的问题，同时保持与标准 Markdown 渲染器的兼容性。通过将插件封装在代码块中，MDCP 实现了"优雅降级"，即在支持相应插件的环境中呈现丰富的交互式内容，而在不支持的环境中则显示为普通代码块，确保内容始终可访问。

## 核心理念

- **兼容性优先**：在所有 Markdown 渲染器中都能显示内容，无需特殊支持
- **优雅降级**：在不支持插件的环境中自动降级为代码块
- **易于扩展**：简单的插件开发模型和注册机制
- **轻量依赖**：最小化外部依赖，易于集成到现有系统

## 工作原理

MDCP 通过以下方式工作：

1. **标准化语法**：使用 Markdown 的代码块语法，通过自定义语言标识符指定插件类型
   ```mdcp-chart
   type: bar
   data: [10, 20, 30, 40]
   labels: ["Q1", "Q2", "Q3", "Q4"]
   ```

2. **检测与转换**：
   - 当渲染器**支持**相应的 MDCP 插件时，插件解析代码块内容并转换为交互式组件
   - 当渲染器**不支持**相应插件时，内容被显示为普通代码块，保持可读性

3. **插件注册机制**：
   - 通过标准化的注册API，开发者可以创建和分享 MDCP 插件
   - 渲染器可以按需加载插件，减少不必要的资源消耗

## 与 MDX 的比较

| 特性 | MDCP | MDX |
|------|------|-----|
| 渲染器兼容性 | 任何 Markdown 渲染器 | 需专门的 MDX 渲染器 |
| 降级行为 | 自动降级为代码块 | 不支持自动降级 |
| 语法复杂度 | 低（基于标准代码块） | 中-高（引入 JSX 语法） |
| 开发复杂度 | 低（专注于内容描述） | 中-高（需要 React 知识） |
| 组件作用域 | 代码块级别 | 文档全局级别 |

## 典型应用场景

- **数据可视化**：图表、地图、网络拓扑等
- **交互式教程**：代码示例、演示、练习
- **富媒体内容**：视频播放器、画廊、幻灯片
- **表单与用户输入**：调查问卷、反馈表单
- **嵌入式工具**：计算器、转换器、编辑器

## 插件示例

### 图表插件

```mdcp-chart
type: line
data: [
  [1, 3, 2, 5, 4],
  [5, 4, 3, 2, 1]
]
labels: ["Jan", "Feb", "Mar", "Apr", "May"]
title: "销售趋势"
```

### 交互式地图

```mdcp-map
center: [39.9042, 116.4074]
zoom: 10
markers: [
  { lat: 39.9042, lng: 116.4074, label: "北京" },
  { lat: 31.2304, lng: 121.4737, label: "上海" }
]
```

## 实现指南

待补充

## 贡献方式

待补充
